(this.webpackJsonpreact_weather=this.webpackJsonpreact_weather||[]).push([[0],{62:function(e,t,r){},63:function(e,t,r){},70:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(14),c=r.n(a),i=(r(62),r(19)),s=(r(63),r(50)),o=r.n(s),l=r(51),u=r.n(l),d=r(8),j=r(6),h=r(47),b=r.n(h),p=r(93),f=r(92),m=r(2),O=function(){var e=Object(j.d)((function(e){return e.error})),t=Object(j.d)((function(e){return e.messageError})),r=Object(j.d)((function(e){return e.isLoading})),n=Object(j.d)((function(e){return e.cities}));return e?Object(m.jsxs)("h2",{className:"error",children:["Loading error: ",t]}):!n&&r?Object(m.jsx)("h2",{children:"Loading..."}):n?n?null:void 0:null},v=r(35),g=r(20),y=r(16),C=r.n(y),x=r(23),w=r(42),E="1e3baa55d15111fb05c9085e59728924",N="https://api.openweathermap.org/",L="weather/ADD_CITY",S="weather/DELETE_CITY",I="weather/DRAG_CITY",k="weather/LOADING",P="weather/ERROR",M="weather/INIT",D="weather/ADD_HOME_CITY",H=function(e){return function(t,r){t(V);var n=r().cities;if(n.some((function(t){return t.id===e.id})))t(Z({message:"city '".concat(e.name,"' has already been added")}));else{var a=[].concat(Object(g.a)(n),[e]);localStorage.removeItem("cities"),localStorage.setItem("cities",JSON.stringify(a)),t({type:L,payload:a})}}},V=function(){return{type:k}},Z=function(e){return{type:P,payload:e}},T=function(e){return function(){var t=Object(x.a)(C.a.mark((function t(r){var n,a;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(V),t.prev=1,t.next=4,fetch("".concat(N,"/data/2.5/weather?q=").concat(e,"&appid=").concat(E,"&units=metric"),{method:"GET"});case 4:return n=t.sent,t.next=7,n.json();case 7:if(!((a=t.sent).cod>=400)){t.next=11;break}return r(Z(a)),t.abrupt("return");case 11:return t.abrupt("return",r(H(a)));case 14:t.prev=14,t.t0=t.catch(1),console.log(t.t0),r(Z(t.t0));case 18:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()},_=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(j.c)(),s=function(e){e.preventDefault(),c(T(r)),a("")};return Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"city-select",children:[Object(m.jsx)("h4",{children:"Add location:"}),Object(m.jsxs)("form",{className:"city-select-form",noValidate:!0,autoComplete:"off",onSubmit:s,children:[Object(m.jsx)(p.a,{placeholder:"Enter city",value:r,onChange:function(e){return a(e.target.value)},id:"outlined-basic",variant:"outlined",required:!0}),Object(m.jsx)(f.a,{type:"button",color:"primary","aria-label":"add",className:"button-add",onClick:s,children:Object(m.jsx)(b.a,{})})]})]}),Object(m.jsx)(O,{})]})},R=r(48),A=r.n(R),J=r(49),B=r.n(J),Y=r(38),G=function(){var e=Object(j.d)((function(e){return e.cities})),t=Object(j.c)();return Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"settings",children:"Settings"}),Object(m.jsx)(Y.a,{onDragEnd:function(e){var r,n,a,c=e.destination,i=e.source;c&&t((r=i.droppableId,n=i.index,a=c.index,function(e,t){var c=t()[r],i=c.splice(n,1);c.splice.apply(c,[a,0].concat(Object(g.a)(i))),localStorage.removeItem("cities"),localStorage.setItem("cities",JSON.stringify(c)),e({type:I,payload:Object(v.a)({},r,c)})}))},children:Object(m.jsx)(Y.c,{droppableId:"cities",children:function(r){return Object(m.jsxs)("div",Object(d.a)(Object(d.a)({className:"cities-list"},r.droppableProps),{},{ref:r.innerRef,children:[null===e||void 0===e?void 0:e.map((function(e,r){return Object(m.jsx)(Y.b,{draggableId:String(e.id),index:r,children:function(r){var n;return Object(m.jsxs)("div",Object(d.a)(Object(d.a)(Object(d.a)({},r.draggableProps),r.dragHandleProps),{},{ref:r.innerRef,className:"city-options",children:[Object(m.jsx)("div",{children:Object(m.jsx)(A.a,{className:"dnd-item"})}),Object(m.jsxs)("p",{className:"city-name",children:[null===e||void 0===e?void 0:e.name,", ",null===e||void 0===e||null===(n=e.sys)||void 0===n?void 0:n.country]}),Object(m.jsx)("p",{className:"delete-option",onClick:function(){return t((r=e,function(e,t){var n=t().cities.filter((function(e){return e!==r})),a=Object(g.a)(n);localStorage.removeItem("cities"),localStorage.setItem("cities",JSON.stringify(a)),e({type:S,payload:a})}));var r},children:Object(m.jsx)(B.a,{})})]}))}},e.id)})),r.placeholder]}))}})}),Object(m.jsx)(_,{})]})},q=r(94),z=r(90),W=r(91);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Q=n.createElement("g",{clipPath:"url(#clip0)"},n.createElement("path",{d:"M0 8.33956C0 7.20769 0.22068 6.12565 0.66204 5.09343C1.1034 4.06122 1.69781 3.17494 2.44527 2.4346C3.19274 1.69425 4.0808 1.1034 5.10945 0.66204C6.1381 0.22068 7.21481 0 8.33956 0C9.47144 0 10.5517 0.22068 11.5804 0.66204C12.609 1.1034 13.4953 1.69603 14.2392 2.43994C14.9831 3.18384 15.5757 4.07012 16.0171 5.09877C16.4584 6.12742 16.6791 7.20769 16.6791 8.33956C16.6791 10.1833 16.1328 11.8295 15.04 13.2782C13.9473 14.7268 12.5396 15.7181 10.8169 16.252V20H5.99039V16.2947C4.23207 15.7822 2.79409 14.7927 1.67645 13.3262C0.558818 11.8598 0 10.1975 0 8.33956ZM1.83663 8.33956C1.83663 10.105 2.47731 11.6213 3.75868 12.8884C5.02581 14.1627 6.55277 14.7998 8.33956 14.7998C9.51415 14.7998 10.6015 14.5115 11.6017 13.9349C12.6019 13.3582 13.3938 12.5734 13.9776 11.5804C14.5613 10.5873 14.8532 9.50703 14.8532 8.33956C14.8532 7.46396 14.6805 6.62573 14.3353 5.82488C13.99 5.02403 13.5255 4.33351 12.9418 3.75334C12.3581 3.17316 11.664 2.71045 10.8596 2.36519C10.0552 2.01993 9.21516 1.8473 8.33956 1.8473C7.46396 1.8473 6.62573 2.01993 5.82488 2.36519C5.02403 2.71045 4.33173 3.17316 3.748 3.75334C3.16426 4.33351 2.69977 5.02403 2.35451 5.82488C2.00925 6.62573 1.83663 7.46396 1.83663 8.33956ZM2.49867 8.74533V7.92312H4.9653V8.74533H2.49867ZM3.73732 4.7197L4.33529 4.13241L6.06514 5.86225L5.47784 6.46022L3.73732 4.7197ZM6.6204 10.3364C6.6204 9.85941 6.7859 9.44652 7.11692 9.0977C7.44794 8.74889 7.85193 8.56736 8.32888 8.55312L11.4362 3.43833L12.1837 3.83342L9.88788 9.33262C10.0872 9.61737 10.1869 9.95195 10.1869 10.3364C10.1869 10.8347 10.0125 11.2565 9.66364 11.6017C9.31482 11.947 8.89126 12.1196 8.39295 12.1196C7.90176 12.1196 7.48354 11.947 7.13828 11.6017C6.79302 11.2565 6.6204 10.8347 6.6204 10.3364ZM8.11532 5.01869V2.55206H8.9055V5.01869H8.11532ZM11.4576 8.73465V7.89108H13.9242V8.73465H11.4576Z",fill:"black"})),U=n.createElement("defs",null,n.createElement("clipPath",{id:"clip0"},n.createElement("rect",{width:16.68,height:20,fill:"white"})));function X(e,t){var r=e.title,a=e.titleId,c=K(e,["title","titleId"]);return n.createElement("svg",F({width:17,height:20,viewBox:"0 0 17 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),r?n.createElement("title",{id:a},r):null,Q,U)}var $=n.forwardRef(X);r.p;function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var re=n.createElement("g",{clipPath:"url(#clip0)"},n.createElement("path",{d:"M0.00171661 8.98828C0.00171661 7.76953 0.238045 6.60352 0.710701 5.49023C1.18336 4.37695 1.82008 3.42188 2.62086 2.625C3.42164 1.82812 4.37476 1.19141 5.48023 0.714844C6.5857 0.238281 7.74781 0 8.96656 0C10.1931 0 11.3611 0.238281 12.4705 0.714844C13.5798 1.19141 14.5369 1.83008 15.3416 2.63086C16.1462 3.43164 16.7869 4.38672 17.2634 5.49609C17.74 6.60547 17.9783 7.76562 17.9783 8.97656C17.9783 10.1953 17.74 11.3613 17.2634 12.4746C16.7869 13.5879 16.1462 14.5469 15.3416 15.3516C14.5369 16.1562 13.5798 16.7949 12.4705 17.2676C11.3611 17.7402 10.197 17.9766 8.97828 17.9766C7.76734 17.9766 6.60719 17.7402 5.49781 17.2676C4.38844 16.7949 3.43336 16.1582 2.63258 15.3574C1.83179 14.5566 1.19312 13.6016 0.71656 12.4922C0.239998 11.3828 0.00171661 10.2148 0.00171661 8.98828ZM1.97047 8.98828C1.97047 10.2539 2.28492 11.4238 2.91383 12.498C3.54273 13.5723 4.39625 14.4199 5.47437 15.041C6.5525 15.6621 7.72047 15.9727 8.97828 15.9727C9.92359 15.9727 10.8298 15.7871 11.697 15.416C12.5642 15.0449 13.3123 14.5469 13.9412 13.9219C14.5701 13.2969 15.0701 12.5527 15.4412 11.6895C15.8123 10.8262 15.9978 9.92187 15.9978 8.97656C15.9978 7.07031 15.3025 5.42187 13.9119 4.03125C12.5212 2.65625 10.8728 1.96875 8.96656 1.96875C8.02125 1.96875 7.11695 2.15625 6.25367 2.53125C5.39039 2.90625 4.64625 3.40625 4.02125 4.03125C3.39625 4.65625 2.8982 5.40234 2.52711 6.26953C2.15601 7.13672 1.97047 8.04297 1.97047 8.98828ZM6.07203 6.30469C6.0564 6.21875 6.07008 6.15234 6.11304 6.10547C6.15601 6.05859 6.21656 6.05078 6.29469 6.08203L13.3494 9C13.4431 9.01563 13.49 9.05469 13.49 9.11719C13.49 9.1875 13.4431 9.24219 13.3494 9.28125L10.6658 10.5C10.5877 10.5313 10.5291 10.5898 10.49 10.6758L9.27125 13.3711C9.23219 13.457 9.1775 13.5 9.10719 13.5C9.04469 13.5 9.00562 13.457 8.99 13.3711L6.07203 6.30469Z",fill:"black"})),ne=n.createElement("defs",null,n.createElement("clipPath",{id:"clip0"},n.createElement("rect",{width:17.98,height:18,fill:"white"})));function ae(e,t){var r=e.title,a=e.titleId,c=te(e,["title","titleId"]);return n.createElement("svg",ee({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),r?n.createElement("title",{id:a},r):null,re,ne)}var ce=n.forwardRef(ae),ie=(r.p,function(e){var t=e.dt,r=e.feelsLike,n=e.pressure,a=e.humidity,c=e.icon,i=e.temp,s=e.name,o=e.country,l=e.visibility,u=e.wind,d=e.weather,j=e.homeCity,h=new Date(t);return Object(m.jsx)(q.a,{className:"root-card",children:Object(m.jsxs)(z.a,{children:[j&&Object(m.jsx)(W.a,{component:"h3",variant:"h5",children:"You are in"}),Object(m.jsxs)(W.a,{variant:"h4",gutterBottom:!0,children:[s,",",o]}),Object(m.jsxs)("div",{className:"weather-info",children:[Object(m.jsx)("div",{className:"weather-item weather-icon",children:Object(m.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(c,"@2x.png"),alt:"weather icon"})}),Object(m.jsxs)(W.a,{variant:"h4",component:"p",className:"weather-item",children:[Math.round(i),"\xb0C"]})]}),Object(m.jsxs)(W.a,{className:"title",color:"textSecondary",gutterBottom:!0,children:["Feels like ",Math.round(r),"\xb0C, ",d,"."]}),Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"weather-params-card",children:[Object(m.jsx)(ce,{className:"params-icon"}),u,"m/s"]}),Object(m.jsxs)("div",{className:"weather-params-card",children:[Object(m.jsx)($,{className:"params-icon"}),n,"hPa"]}),Object(m.jsxs)("div",{className:"weather-params-card",children:["Humidity: ",a,"%"]}),Object(m.jsxs)("div",{className:"weather-params-card",children:["Visibility: ",l/1e3,"km"]})]}),Object(m.jsx)(W.a,{variant:"h6",component:"h2",children:Object(m.jsx)("p",{children:h.toLocaleDateString()})})]})})}),se=function(e){var t=e.isLoading,r=Object(j.d)((function(e){return e.cities})),n=Object(j.d)((function(e){return e.homeCity}));return Object(m.jsxs)("div",{className:"",children:[r&&r.map((function(e){return Object(m.jsx)(ie,{dt:1e3*e.dt,feelsLike:e.main.feels_like,pressure:e.main.pressure,humidity:e.main.humidity,icon:e.weather[0].icon,temp:e.main.temp,name:e.name,country:e.sys.country,visibility:e.visibility,wind:e.wind.speed,weather:e.weather[0].description},e.id)})),t&&Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Loading..."}),Object(m.jsx)("h2",{children:"Calculating your geo-position"})]}),n&&Object(m.jsx)(ie,{dt:1e3*n.dt,feelsLike:n.main.feels_like,pressure:n.main.pressure,humidity:n.main.humidity,icon:n.weather[0].icon,temp:n.main.temp,name:n.name,country:n.sys.country,visibility:n.visibility,wind:n.wind.speed,weather:n.weather[0].description,homeCity:n})]})};var oe=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(j.c)(),s=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(n.useEffect)((function(){function e(){return(e=Object(x.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation.getCurrentPosition(function(){var e=Object(x.a)(C.a.mark((function e(t){var r,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(N,"/data/2.5/weather?lat=").concat(t.coords.latitude,"&lon=").concat(t.coords.longitude,"&appid=").concat(E));case 3:return r=e.sent,e.next=6,r.json();case 6:n=e.sent,l(!1),a(n),e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),l(!1),console.log(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l(!0),function(){e.apply(this,arguments)}()}),[]),{data:r,isLoading:o}}(),l=s.data,d=s.isLoading;return c(function(e,t){return function(){var r=Object(x.a)(C.a.mark((function r(n){var a;return C.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(V),r.next=3,null===e||void 0===e?void 0:e.name;case 3:a=r.sent,e&&!t&&fetch("".concat(N,"/data/2.5/weather?q=").concat(a,"&appid=").concat(E,"&units=metric"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(!(e.cod>=400))return n({type:D,payload:e});n(Z(e))})).catch((function(e){console.log(e),n(Z(e))}));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(l,d)),Object(n.useEffect)((function(){var e,t=localStorage.getItem("cities")?localStorage.getItem("cities"):"[]";c((e=JSON.parse(t),function(t){t({type:M});var r,n=Object(w.a)(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;t(T(a.name))}}catch(c){n.e(c)}finally{n.f()}}))}),[c]),Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("h1",{children:"Weather today"}),r&&Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"gear",children:Object(m.jsx)(o.a,{fontSize:"large",onClick:function(){return a(!1)}})}),Object(m.jsx)(se,{isLoading:d})]}),!r&&Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"gear",children:Object(m.jsx)(u.a,{fontSize:"large",onClick:function(){return a(!0)}})}),Object(m.jsx)(G,{})]})]})},le=r(15),ue=r(52),de={cities:[],homeCity:null,isLoading:!1,error:!1,messageError:""};var je=r(53),he=Object(le.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case M:return de;case D:return Object(d.a)(Object(d.a)({},e),{},{homeCity:r,isLoading:!1,error:!1,messageError:""});case L:return Object(d.a)(Object(d.a)({},e),{},{cities:Object(g.a)(r),isLoading:!1,error:!1,messageError:""});case S:return Object(d.a)(Object(d.a)({},e),{},{cities:Object(g.a)(r),error:!1,messageError:""});case I:return Object(d.a)(Object(d.a)({},e),r);case k:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,error:!1});case P:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:!0,messageError:r.message});default:return e}}),Object(je.composeWithDevTools)(Object(le.applyMiddleware)(ue.a)));c.a.render(Object(m.jsx)(j.a,{store:he,children:Object(m.jsx)(oe,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.79ec712b.chunk.js.map